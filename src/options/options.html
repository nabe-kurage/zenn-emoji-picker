<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zenn Emoji Picker - 設定</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <!-- ヘッダー -->
    <header class="header">
      <div class="header-content">
        <h1 class="title">🎨 Zenn Emoji Picker</h1>
        <p class="subtitle">設定</p>
      </div>
    </header>

    <!-- メインコンテンツ -->
    <main class="main-content">
      <div class="settings-grid">
        <!-- API設定セクション -->
        <section class="settings-section">
          <h2 class="section-title">API設定</h2>
          <div class="section-content">
            <div class="form-group">
              <label for="api-key" class="label">APIキー</label>
              <div class="input-group">
                <input 
                  type="password" 
                  id="api-key" 
                  class="input"
                  placeholder="選択したAIサービスのAPIキーを入力"
                >
                <button type="button" id="toggle-api-key" class="toggle-button" title="表示/非表示">👁️</button>
              </div>
              <p class="help-text" id="api-key-help">
                APIキーは暗号化して安全に保存されます。
              </p>
            </div>

            <div class="form-group">
              <label for="api-type" class="label">使用するAI API</label>
              <select id="api-type" class="select">
                <option value="gemini">Google Gemini（無料枠あり・推奨）</option>
                <option value="claude">Claude API</option>
                <option value="openai">OpenAI API</option>
              </select>
              <p class="help-text">
                使用するAI APIを選択してください。Geminiは無料枠があるため個人利用におすすめです。
              </p>
            </div>

            <div class="form-group">
              <label for="api-model" class="label">AIモデル</label>
              <select id="api-model" class="select">
                <option value="gemini-1.5-flash">Gemini 1.5 Flash（推奨・高速）</option>
                <option value="gemini-1.5-pro">Gemini 1.5 Pro（高性能）</option>
              </select>
              <p class="help-text" id="api-model-help">
                使用するAIモデルを選択してください。
              </p>
            </div>

            <div class="form-actions">
              <button type="button" id="test-api" class="button secondary">
                🔍 接続テスト
              </button>
              <button type="button" id="save-api" class="button primary">
                💾 保存
              </button>
            </div>
          </div>
        </section>

        <!-- 機能設定セクション -->
        <section class="settings-section">
          <h2 class="section-title">機能設定</h2>
          <div class="section-content">
            <div class="form-group">
              <div class="checkbox-group">
                <input type="checkbox" id="enable-cache" class="checkbox">
                <label for="enable-cache" class="checkbox-label">
                  キャッシュ機能を有効にする
                </label>
              </div>
              <p class="help-text">
                同じ記事内容での重複API呼び出しを防ぎ、レスポンスを高速化します。
              </p>
            </div>

            <div class="form-group">
              <div class="checkbox-group">
                <input type="checkbox" id="enable-history" class="checkbox">
                <label for="enable-history" class="checkbox-label">
                  履歴機能を有効にする
                </label>
              </div>
              <p class="help-text">
                過去の絵文字提案を履歴として保存します。
              </p>
            </div>

            <div class="form-group">
              <div class="checkbox-group">
                <input type="checkbox" id="enable-animation" class="checkbox">
                <label for="enable-animation" class="checkbox-label">
                  アニメーション効果を有効にする
                </label>
              </div>
              <p class="help-text">
                UIのアニメーション効果を表示します。無効にするとパフォーマンスが向上します。
              </p>
            </div>

            <div class="form-group">
              <label for="max-suggestions" class="label">最大提案数</label>
              <select id="max-suggestions" class="select">
                <option value="2">2個（デフォルト）</option>
                <option value="3">3個</option>
                <option value="5">5個</option>
              </select>
              <p class="help-text">
                サブ絵文字の最大提案数を設定します。
              </p>
            </div>

            <div class="form-actions">
              <button type="button" id="save-settings" class="button primary">
                💾 設定を保存
              </button>
            </div>
          </div>
        </section>

        <!-- データ管理セクション -->
        <section class="settings-section">
          <h2 class="section-title">データ管理</h2>
          <div class="section-content">
            <div class="stats-grid" id="stats-grid">
              <!-- 統計情報を動的に表示 -->
            </div>

            <div class="form-actions dangerous-actions">
              <button type="button" id="clear-cache" class="button secondary">
                🗑️ キャッシュをクリア
              </button>
              <button type="button" id="clear-favorites" class="button secondary">
                🗑️ お気に入りをクリア
              </button>
              <button type="button" id="clear-history" class="button secondary">
                🗑️ 履歴をクリア
              </button>
              <button type="button" id="clear-all-data" class="button danger">
                ⚠️ 全データを削除
              </button>
            </div>
          </div>
        </section>

        <!-- 情報セクション -->
        <section class="settings-section">
          <h2 class="section-title">拡張機能情報</h2>
          <div class="section-content">
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">バージョン</span>
                <span class="info-value" id="extension-version">1.0.0</span>
              </div>
              <div class="info-item">
                <span class="info-label">開発者</span>
                <span class="info-value">Zenn Emoji Picker Team</span>
              </div>
              <div class="info-item">
                <span class="info-label">ライセンス</span>
                <span class="info-value">MIT License</span>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" id="view-logs" class="button secondary">
                📄 ログを表示
              </button>
              <button type="button" id="export-settings" class="button secondary">
                📤 設定をエクスポート
              </button>
              <button type="button" id="import-settings" class="button secondary">
                📥 設定をインポート
              </button>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- フッター -->
    <footer class="footer">
      <div class="footer-content">
        <p class="footer-text">
          © 2024 Zenn Emoji Picker. 
          <a href="https://github.com/your-repo/zenn-emoji-picker" target="_blank" rel="noopener">GitHub</a> |
          <a href="https://zenn.dev" target="_blank" rel="noopener">Zenn</a>
        </p>
      </div>
    </footer>
  </div>

  <!-- トースト通知 -->
  <div class="toast hidden" id="toast">
    <span class="toast-message" id="toast-message"></span>
  </div>

  <!-- 確認ダイアログ -->
  <div class="modal-overlay hidden" id="confirm-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="confirm-title">確認</h3>
      </div>
      <div class="modal-body">
        <p id="confirm-message">この操作を実行しますか？</p>
      </div>
      <div class="modal-footer">
        <button type="button" id="confirm-cancel" class="button secondary">キャンセル</button>
        <button type="button" id="confirm-ok" class="button danger">実行</button>
      </div>
    </div>
  </div>

  <!-- ファイルインポート用 -->
  <input type="file" id="import-file" accept=".json" style="display: none;">

  <script type="module" src="options.js"></script>
</body>
</html>